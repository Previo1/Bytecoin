<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BYTE COIN — Mobile Tap & Mine</title>
<link rel="icon" href="coin.png">
<style>
:root {
  --bg:#0b1220;
  --card:#0f1724;
  --accent:#f59e0b;
  --text:#ffffff;
  --muted:#94a3b8;
}
* { box-sizing:border-box; margin:0; padding:0; font-family:'Segoe UI', sans-serif; }
body { background:var(--bg); color:var(--text); overflow-x:hidden; }
header { padding:10px; text-align:center; background: var(--card); box-shadow:0 2px 5px rgba(0,0,0,0.5);}
nav { display:flex; justify-content:space-around; background: var(--card); padding:10px 0; position:fixed; bottom:0; width:100%; z-index:10; }
nav button { background:none; border:none; color:var(--text); font-size:1em; cursor:pointer; }
nav button.active { color:var(--accent); font-weight:bold; }
.card { background:var(--card); margin:10px; border-radius:12px; padding:15px; box-shadow:0 2px 5px rgba(0,0,0,0.5);}
button { background:var(--accent); border:none; padding:10px 15px; color:#000; border-radius:8px; cursor:pointer; margin:5px 0; width:100%; font-size:1em; }
#history{max-height:200px; overflow-y:auto;}
input { width:100%; background:#222; color:#fff; border:none; padding:5px; border-radius:5px; }

.progress-container { background: #222; border-radius: 10px; overflow: hidden; height: 20px; margin-top: 10px; }
.progress-bar { height: 100%; width: 0%; background: var(--accent); transition: width 0.2s; }

#tapCoin { width:100px; height:100px; margin:20px auto; display:block; cursor:pointer; user-select:none; transition: transform 0.1s; position:relative; z-index:2;}
#comboCounter { text-align:center; font-size:18px; margin-top:-10px; color:var(--accent); }

.particle { position:absolute; width:10px; height:10px; border-radius:50%; pointer-events:none; z-index:1; }
@media (max-width:480px){
  #tapCoin { width:80px; height:80px; }
  button { font-size:0.9em; padding:8px 12px; }
}
</style>
</head>
<body>
<audio id="tapSound" src="tap-sound.mp3"></audio>

<header>
<h1>BYTE COIN</h1>
<p>Coins: <span id="coinDisplay">0</span> ₿</p>
</header>

<div id="home" class="page">
  <div class="card">
    <h2>Tap Coin ✨</h2>
    <img id="tapCoin" src="tapcoin.png" alt="Tap Coin">
    <div id="comboCounter">Combo: 0</div>
    <p style="font-size:14px;">Tap the coin to earn 1 ₿ each time! Combo bonus: 5 consecutive taps → +5 ₿</p>
  </div>
  <div class="card">
    <h2>Mine Coins ⛏️</h2>
    <p>Mining is active. Watch the progress!</p>
    <div class="progress-container"><div class="progress-bar" id="mineProgress"></div></div>
  </div>
  <div class="card">
    <h2>Withdraw</h2>
    <button onclick="alert('Coming Soon!')">Withdraw</button>
  </div>
</div>

<div id="tasks" class="page" style="display:none;">
  <div class="card">
    <h2>Daily Login Reward</h2>
    <button onclick="dailyLogin()">Claim Daily 50 ₿</button>
  </div>
  <div class="card">
    <h2>Join Telegram Channel</h2>
    <p><a href="https://t.me/bytecoinS22m" target="_blank">Click to Join</a></p>
    <button onclick="joinTelegram()">Claim 500 ₿</button>
  </div>
  <div class="card">
    <h2>Share Referral Link</h2>
    <p>Share this link:<br><input type="text" id="refLink" readonly></p>
    <button onclick="copyReferral()">Copy & Share</button>
  </div>
  <div class="card">
    <h2>Share & Earn</h2>
    <button onclick="shareWhatsApp()">Share on WhatsApp +100 ₿</button>
    <button onclick="shareTelegram()">Share on Telegram +100 ₿</button>
  </div>
</div>

<div id="historyPage" class="page" style="display:none;">
  <div class="card">
    <h2>History</h2>
    <ul id="history"></ul>
  </div>
</div>

<nav>
  <button onclick="showPage('home')" class="active">Home</button>
  <button onclick="showPage('tasks')">Tasks</button>
  <button onclick="showPage('historyPage')">History</button>
</nav>

<script>
let coins = parseInt(localStorage.getItem('coins')||0);
let lastLogin = localStorage.getItem('lastLogin');
let referrals = JSON.parse(localStorage.getItem('referrals')||'[]');
let shared = JSON.parse(localStorage.getItem('shared')||'{"whatsapp":false,"telegram":false}');
let userId = 'user_109314';
document.getElementById('coinDisplay').innerText = coins;
document.getElementById('refLink').value = window.location.href+'?ref='+userId;

function updateDisplay(){ document.getElementById('coinDisplay').innerText = coins; }
function addHistory(text){
  let history = JSON.parse(localStorage.getItem('history')||'[]');
  history.unshift(new Date().toLocaleString() + ': '+text);
  localStorage.setItem('history',JSON.stringify(history));
  renderHistory();
}
function renderHistory(){
  let history = JSON.parse(localStorage.getItem('history')||'[]');
  let ul = document.getElementById('history'); ul.innerHTML='';
  history.forEach(h=>{ let li=document.createElement('li'); li.innerText=h; ul.appendChild(li); });
}
renderHistory();

// Navigation
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
}

// Tap Coin + Combo + Particle + Sound + Rainbow
let tapCount = 0;
let comboTimeout;
const comboDisplay = document.getElementById('comboCounter');
const tapCoin = document.getElementById('tapCoin');
const tapSound = document.getElementById('tapSound');

tapCoin.addEventListener('click',()=>{
  coins += 1;
  tapCount += 1;
  updateDisplay();
  addHistory('Tapped coin +1 ₿');

  tapSound.currentTime = 0;
  tapSound.play();

  comboDisplay.innerText = 'Combo: '+tapCount;
  spawnParticles(tapCoin,true);

  clearTimeout(comboTimeout);
  if(tapCount >=5){
    coins +=5;
    updateDisplay();
    addHistory('Combo bonus +5 ₿');
    alert('Combo bonus +5 ₿!');
    tapCount = 0;
    comboDisplay.innerText = 'Combo: 0';
  }

  comboTimeout = setTimeout(()=>{
    tapCount = 0;
    comboDisplay.innerText = 'Combo: 0';
  },2000);
});

// Particle effect
function spawnParticles(elem,rainbow=false){
  for(let i=0;i<15;i++){
    let p = document.createElement('div');
    p.classList.add('particle');
    if(rainbow){
      p.style.background = `hsl(${Math.random()*360},100%,50%)`;
    } else {
      p.style.background = '#f59e0b';
    }
    document.body.appendChild(p);
    let rect = elem.getBoundingClientRect();
    p.style.left = rect.left + rect.width/2 + 'px';
    p.style.top = rect.top + rect.height/2 + 'px';
    let x = (Math.random()-0.5)*120;
    let y = (Math.random()-0.5)*120;
    p.animate([
      { transform: `translate(0,0) scale(1)`, opacity:1 },
      { transform: `translate(${x}px, ${y}px) scale(0)`, opacity:0 }
    ],{ duration: 800, easing:'ease-out' });
    setTimeout(()=>p.remove(),800);
  }
}

// Mining animation
let progressBar = document.getElementById('mineProgress');
let progress = 0;
function autoMine(){
  progress += Math.random()*10;
  if(progress >= 100){
    let mined = Math.floor(Math.random()*5)+1;
    coins += mined;
    localStorage.setItem('coins',coins);
    updateDisplay();
    addHistory('Auto-mined '+mined+' ₿');
    progress = 0;
  }
  progressBar.style.width = progress + '%';
}
setInterval(autoMine, 700);

// Daily login
function dailyLogin(){
  let today = new Date().toDateString();
  if(lastLogin === today){ alert('Already claimed today!'); return; }
  coins += 50;
  localStorage.setItem('coins',coins);
  lastLogin = today;
  localStorage.setItem('lastLogin',today);
  updateDisplay();
  addHistory('Daily login +50 ₿');
}

// Telegram Join
function joinTelegram(){
  if(localStorage.getItem('telegramJoined')==='true'){ alert('Already claimed!'); return; }
  coins += 500;
  localStorage.setItem('coins',coins);
  localStorage.setItem('telegramJoined','true');
  updateDisplay();
  addHistory('Telegram join +500 ₿');
}

// Referral
function copyReferral(){
  let link = document.getElementById('refLink');
  link.select(); link.setSelectionRange(0, 99999);
  navigator.clipboard.writeText(link.value).then(()=>alert('Referral link copied!'));
}
function handleReferralClick(refUser){
  if(referrals.includes(refUser)){ alert('Already counted this referral'); return; }
  referrals.push(refUser);
  localStorage.setItem('referrals',JSON.stringify(referrals));
  addHistory('Referral click from '+refUser);
  if(referrals.length>=2){
    coins += 100;
    localStorage.setItem('coins',coins);
    updateDisplay();
    addHistory('Referral reward +100 ₿');
  }
}

// Share buttons reward
function shareWhatsApp(){
  if(shared.whatsapp){ alert('Already claimed!'); return; }
  coins += 100;
  localStorage.setItem('coins',coins);
  shared.whatsapp = true;
  localStorage.setItem('shared',JSON.stringify(shared));
  updateDisplay();
  addHistory('Shared on WhatsApp +100 ₿');
  window.open('https://wa.me/?text='+encodeURIComponent(document.getElementById('refLink').value),'_blank');
}
function shareTelegram(){
  if(shared.telegram){ alert('Already claimed!'); return; }
  coins += 100;
  localStorage.setItem('coins',coins);
  shared.telegram = true;
  localStorage.setItem('shared',JSON.stringify(shared));
  updateDisplay();
  addHistory('Shared on Telegram +100 ₿');
  window.open('https://t.me/share/url?url='+encodeURIComponent(document.getElementById('refLink').value),'_blank');
}
</script>
</body>
</html>
